<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
</head>
<style type="text/css">
body{width:98%;height: 500px;}
button{border: 0px;}
</style>
<body id="main">
</body>
<script type="text/javascript">	
var n=0;
var totalWidth = document.body.clientWidth;//窗口最大宽度//console.log(totalWidth);
var totalHeight = document.body.clientHeight;//窗口最大高度//console.log(totalHeight);
createButton(100,100,20);//获取主角滑块
var elem = document.getElementById("my_button");
createRandomButton(20);
document.addEventListener("keydown",moveButton,false);//方向键摁下的触发时间
function moveButton(event){

	switch(event.keyCode){
		case 37://左
			moveToLeft();
			break;
		case 38://上
			moveToTop();
			break;
		case 39://右
			moveToRight();
			break;
		case 40://下
			moveToBottom();
			break;
		default:
			n++;
			//console.log("恩错键"+n+"次.");
	}
}
function moveToLeft(){
	var elem_left = parseInt(elem.style.left);//获取当前滑块的左边距
	//console.log("每次移动前elem_left:"+elem_left);
	//console.log("每次移动前elem.offsetLeft:"+elem.offsetLeft);
	if(elem_left>0){
		elem_left-=10;
		elem.style.left = elem_left+"px";
		//console.log("每次移动后elem.style.left:"+elem.style.left);
		//console.log("每次移动后elem.offsetLeft:"+elem.offsetLeft);
	}
	
}
function moveToRight(){
	var elem_left = parseInt(elem.style.left);
	if(elem_left<totalWidth){
		elem_left+=10;
		elem.style.left = elem_left+"px";
		//console.log("离左边"+ (elem_left));
	}
}
function moveToTop(){
	var elem_top = parseInt(elem.style.top);//获取当前滑块的上边距
	if(elem_top>0){
		elem.style.top = elem_top-10+"px";
		//console.log("离顶边"+elem_top);
	}
}
function moveToBottom(){
	var elem_top = parseInt(elem.style.top);
		elem.style.top = elem_top+10+"px";
		//console.log("离顶边"+ (elem_top));
}

function createRandomButton(l){//m为left值,n为top值,l为滑块边长
	var elem_left = Math.floor(Math.random()*(totalWidth-l));//随机产生一个不大于最大左右边界-l的值
	var elem_top = Math.floor(Math.random()*(totalHeight-l));//随机产生一个不大于最大上下边界-l的值
	if(Math.abs(elem_left-(parseInt(elem.style.left)))<l&&Math.abs(elem_top-(parseInt(elem.style.top)))<l||elem_left>totalWidth-l||elem_top>totalHeight-l){
		createRandomButton(l);
	}
	else{
		var button = document.createElement("button");
		button.style.position = "absolute";
		button.style.left = elem_left + "px";
		button.style.top = elem_top + "px";
		button.style.width = l +　"px";
		button.style.height = l + "px";
		button.style.backgroundColor = "blue";
		document.getElementById("main").appendChild(button);
	}
}
function createButton(m,n,l){
	var button = document.createElement("button");
		button.style.position = "absolute";
		button.style.left = m + "px";
		button.style.top = n + "px";
		button.style.width = l +　"px";
		button.style.height = l + "px";
		button.style.backgroundColor = "blue";
		button.setAttribute("id","my_button");
		document.getElementById("main").appendChild(button);
}
</script>
</html>