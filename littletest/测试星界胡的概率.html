<!DOCTYPE html>
<html>
<head>
	<title>test</title>
	<meta charset="utf-8"/>
	<style type="text/css">
		
	</style>
</head>
<body>
<p id="p1"></p>
<p id="p2"></p>
</body>
<script type="text/javascript">
	var card,flag,times,total=0,ave=0,yes=0;
	function init() {
		card = new Array(30);
		times =0;flag=0;
		x1 = Math.floor(Math.random()*card.length);
		x2 = Math.floor(Math.random()*card.length);
		card[x1]=1;
		if(x2==x1&&x2!=(card.length-1)){card[x2+1]=1;}
		else if(x2==(card.length-1))card[0]=1;
			else card[x2]=1;
	}
	function choupai(n){
		var x,y;
		for(var i=0;i<n;i++){
			x = Math.floor(Math.random()*(card.length));
			y = card[x];
			card.splice(x,1);
			if(y===1)
				flag=1;
		}
	}
	function qishou(){
		init();
		choupai(4);
		if(flag===1)
			return true;
		else
			{
				init();
				choupai(4);
				if(flag===1)
					return true;
			}
		return false;
	}
	function main(){
		var p1 = document.getElementById("p1");
		var p2 = document.getElementById("p2");
		if(qishou())
			{times = 6;console.log("起手就拿到了！！");}
		else{
			times = 3;
			while(flag===0){
				choupai(1);
				times++;
			}
		}
		if(times<=6)
			times = 6;
		p1.innerHTML = "共执行次数："+total+"  本次星界抽了"+times+"次";

	}
function doit(){
	main();
	total++;
	if(times===6)
		yes++;
	ave = yes/total;
	p2.innerHTML =  "3费星界的概率是："+ave;
}
setInterval(doit,1);
</script>
</html>